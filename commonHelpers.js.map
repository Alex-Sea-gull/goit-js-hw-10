{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = null;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0];\n        checkUserStatus();\n    },\n};\n\nflatpickr('input#datetime-picker', options);\n\nconst timerBtn = document.querySelector('[data-start]');\nconst timerInput = document.querySelector('#datetime-picker');\nconst dataDays = document.querySelector('[data-days]');\nconst dataHours = document.querySelector('[data-hours]');\nconst dataMinutes = document.querySelector('[data-minutes]');\nconst dataSeconds = document.querySelector('[data-seconds]');\ntimerBtn.setAttribute('disabled', 'true');\ntimerBtn.addEventListener('click', handleClick);\n\nfunction checkUserStatus() {\n    if (!userSelectedDate) {\n        return;\n    }\n    if (userSelectedDate < new Date()) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please choose a date in the future',\n            position: 'topRight',\n            backgroundColor: '#EF4040',\n        });\n        timerBtn.setAttribute('disabled', 'true');\n    } else {\n        timerBtn.removeAttribute('disabled');\n    }\n}\n\nfunction handleClick() {\n    if (userSelectedDate > new Date()) {\n        iziToast.success({\n            title: 'Timer started',\n            message: 'The timer has started',\n            position: 'topRight',\n        });\n        timerInput.setAttribute('disabled', 'true');\n        timerBtn.setAttribute('disabled', 'true');\n        const intervalID = setInterval(() => {\n            let diff = userSelectedDate - new Date();\n            if (diff >= 0) {\n                const timerTime = convertMs(diff);\n                updateTimerDisplay(timerTime);\n            } else {\n                timerInput.removeAttribute('disabled');\n                timerBtn.removeAttribute('disabled');\n                iziToast.success({\n                    title: 'Timer Finished',\n                    message: 'The timer is over',\n                    position: 'topRight',\n                });\n                clearInterval(intervalID);\n            }\n        }, 1000);\n    }\n}\n\nfunction updateTimerDisplay(timerTime) {\n    const { days, hours, minutes, seconds } = timerTime;\n    dataDays.textContent = String(days).padStart(2, '0');\n    dataHours.textContent = String(hours).padStart(2, '0');\n    dataMinutes.textContent = String(minutes).padStart(2, '0');\n    dataSeconds.textContent = String(seconds).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n"],"names":["userSelectedDate","options","selectedDates","checkUserStatus","flatpickr","timerBtn","timerInput","dataDays","dataHours","dataMinutes","dataSeconds","handleClick","iziToast","intervalID","diff","timerTime","convertMs","updateTimerDisplay","days","hours","minutes","seconds","ms"],"mappings":"2GAMA,IAAIA,EAAmB,KAEvB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBF,EAAmBE,EAAc,CAAC,EAClCC,GACH,CACL,EAEAC,EAAU,wBAAyBH,CAAO,EAE1C,MAAMI,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAC3DL,EAAS,aAAa,WAAY,MAAM,EACxCA,EAAS,iBAAiB,QAASM,CAAW,EAE9C,SAASR,GAAkB,CAClBH,IAGDA,EAAmB,IAAI,MACvBY,EAAS,MAAM,CACX,MAAO,QACP,QAAS,qCACT,SAAU,WACV,gBAAiB,SAC7B,CAAS,EACDP,EAAS,aAAa,WAAY,MAAM,GAExCA,EAAS,gBAAgB,UAAU,EAE3C,CAEA,SAASM,GAAc,CACnB,GAAIX,EAAmB,IAAI,KAAQ,CAC/BY,EAAS,QAAQ,CACb,MAAO,gBACP,QAAS,wBACT,SAAU,UACtB,CAAS,EACDN,EAAW,aAAa,WAAY,MAAM,EAC1CD,EAAS,aAAa,WAAY,MAAM,EACxC,MAAMQ,EAAa,YAAY,IAAM,CACjC,IAAIC,EAAOd,EAAmB,IAAI,KAClC,GAAIc,GAAQ,EAAG,CACX,MAAMC,EAAYC,EAAUF,CAAI,EAChCG,EAAmBF,CAAS,CAC5C,MACgBT,EAAW,gBAAgB,UAAU,EACrCD,EAAS,gBAAgB,UAAU,EACnCO,EAAS,QAAQ,CACb,MAAO,iBACP,QAAS,oBACT,SAAU,UAC9B,CAAiB,EACD,cAAcC,CAAU,CAE/B,EAAE,GAAI,CACV,CACL,CAEA,SAASI,EAAmBF,EAAW,CACnC,KAAM,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKN,EAC1CR,EAAS,YAAc,OAAOW,CAAI,EAAE,SAAS,EAAG,GAAG,EACnDV,EAAU,YAAc,OAAOW,CAAK,EAAE,SAAS,EAAG,GAAG,EACrDV,EAAY,YAAc,OAAOW,CAAO,EAAE,SAAS,EAAG,GAAG,EACzDV,EAAY,YAAc,OAAOW,CAAO,EAAE,SAAS,EAAG,GAAG,CAC7D,CAEA,SAASL,EAAUM,EAAI,CAQnB,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAE1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EAEpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EAEjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C"}